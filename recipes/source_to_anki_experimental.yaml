- generate_guids_in_csv:
    source: src/data/guid.csv
    columns:
      - guid
      - guid:de
      - guid:es
      - guid:fr
      - guid:nb
      - guid:cs
      - guid:ru
      - guid:nl
      - guid:sv
      - guid:pt
      - guid:zh
      - guid:pl
      - guid:it
      - guid:da

- build_parts:
  - note_model_from_yaml_part:
      part_id: Ultimate Geography [Experimental]
      file: src/note_models/Ultimate_Geography_[Experimental].yaml

  - headers_from_yaml_part:
      - part_id: default header
        file: src/headers/default.yaml
        override:
          deck_description_html_file: src/headers/desc.html
          crowdanki_uuid: 43c5ba66-9a65-11e8-90c9-a0481cc15658
          name: Ultimate Geography

  - media_group_from_folder:
      - part_id: maps
        source: src/media/maps
        recursive: true
      - part_id: flags
        source: src/media/flags
        recursive: true
      - part_id: experimental_assets
        source: src/media/experimental_assets

  - notes_from_csvs:
      part_id: english
      note_model_mappings:
        - note_models:
            - Ultimate Geography [Experimental]
          columns_to_fields:
            flag             : Flag
            map              : Map
            tags             : tags
            guid             : guid
            country          : Country
            country info     : Country info
            capital          : Capital
            capital info     : Capital info
            capital hint     : Capital hint
            flag similarity  : Flag similarity
            region code      : Region code

          personal_fields: [ ]

      file_mappings:
        - file: src/data/main.csv
          note_model: Ultimate Geography [Experimental]
          derivatives:
            - file: src/data/guid.csv
            - file: src/data/country.csv
            - file: src/data/country_info.csv
            - file: src/data/capital.csv
            - file: src/data/capital_info.csv
            - file: src/data/capital_hint.csv
            - file: src/data/flag_similarity.csv
            - file: src/data/region_code.csv

- generate_crowd_anki:
    headers: default header
    media:
      parts: [maps, flags, experimental_assets]
    note_models:
      parts:
        - part_id: Ultimate Geography [Experimental]

    folder: build/Ultimate Geography [EN] [Experimental]
    notes:
      part_id: english
